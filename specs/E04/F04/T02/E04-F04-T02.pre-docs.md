# E04-F04-T02 - Navigation Shortcuts: Pre-Implementation Documentation

## Document Information

- **Task ID**: E04-F04-T02
- **Task Title**: Navigation Shortcuts
- **Document Type**: Pre-Implementation Planning
- **Created**: 2025-12-26
- **Status**: Planning
- **Target Release**: MVP (P0)
- **Estimated Hours**: 3
- **Effort**: Small

---

## 1. Overview

### 1.1 Executive Summary

This task implements keyboard shortcuts for navigation operations including search, zoom, pan, and view fitting. These are high-frequency operations during schematic exploration, and keyboard access significantly improves workflow efficiency compared to mouse-only interaction or toolbar buttons.

Navigation shortcuts enable power users to rapidly navigate large schematics without constantly reaching for the mouse, maintaining focus on the analysis task rather than the UI.

### 1.2 Problem Context

During schematic exploration, users frequently need to:
- **Search** for specific cells, nets, or pins (`Ctrl+F`)
- **Zoom** in/out to see details or overview (`+`, `-`, `Ctrl+=`, `Ctrl+-`)
- **Pan** the view to explore adjacent areas (arrow keys)
- **Fit view** to selection or all visible objects (`Space`, `Ctrl+0`)

Without keyboard shortcuts, these operations require:
- Moving hand from keyboard to mouse
- Clicking toolbar buttons or menu items
- Scrolling with mouse wheel (imprecise zoom control)
- Dragging canvas with middle mouse button (not discoverable)

This constant context switching slows down the analysis workflow and increases cognitive load.

### 1.3 Scope

**In Scope:**
- Search shortcut (`Ctrl+F`) to open and focus search dialog
- Zoom shortcuts (`+`, `-`, `Ctrl+=`, `Ctrl+-`, `Ctrl+1`, `Ctrl+0`)
- Pan shortcuts (arrow keys: Up, Down, Left, Right)
- View fit shortcuts (`Space` for selection, `Ctrl+0` for all)
- Integration with existing canvas zoom/pan methods
- Focus management for search dialog

**Out of Scope (Future Work):**
- Configurable zoom factors (fixed 1.2x for MVP)
- Configurable pan distances (fixed 50px for MVP)
- Smooth animated zoom/pan (P1)
- Zoom to cursor position (P1)
- History navigation shortcuts (Alt+Left/Right reserved for future)

---

## 2. Architecture Decisions

### 2.1 Canvas Method Design

#### Decision: Implement zoom/pan/fit methods on SchematicCanvas

**Rationale:**
- Canvas owns the view transformation state
- Canvas methods can be called from shortcuts OR toolbar buttons OR menu items
- Separation of input handling (shortcuts) from view manipulation (canvas)
- Testable in isolation

**Design:**

```python
# src/ink/presentation/canvas/schematic_canvas.py
from PySide6.QtWidgets import QGraphicsView
from PySide6.QtCore import QRectF, Qt
from typing import List

class SchematicCanvas(QGraphicsView):
    """Schematic canvas with keyboard navigation support."""

    def zoom_in(self, factor: float = 1.2) -> None:
        """Zoom in by the specified factor."""
        self.scale(factor, factor)

    def zoom_out(self, factor: float = 1.2) -> None:
        """Zoom out by the specified factor."""
        self.scale(1 / factor, 1 / factor)

    def reset_zoom(self) -> None:
        """Reset zoom to 100% (identity transform)."""
        self.resetTransform()

    def pan(self, dx: int, dy: int) -> None:
        """
        Pan view by delta in pixels.

        Args:
            dx: Horizontal pan (positive = right)
            dy: Vertical pan (positive = down)
        """
        h_bar = self.horizontalScrollBar()
        v_bar = self.verticalScrollBar()
        h_bar.setValue(h_bar.value() + dx)
        v_bar.setValue(v_bar.value() + dy)

    def fit_items(self, items: List[QGraphicsItem]) -> None:
        """Fit view to given items with 10% padding."""
        if not items:
            return

        bounding_rect = QRectF()
        for item in items:
            bounding_rect = bounding_rect.united(item.sceneBoundingRect())

        # Add 10% padding
        padding = max(bounding_rect.width(), bounding_rect.height()) * 0.1
        bounding_rect.adjust(-padding, -padding, padding, padding)

        self.fitInView(bounding_rect, Qt.AspectRatioMode.KeepAspectRatio)

    def fit_all(self) -> None:
        """Fit view to all visible items with 10% padding."""
        scene_rect = self.scene().itemsBoundingRect()
        if not scene_rect.isEmpty():
            padding = max(scene_rect.width(), scene_rect.height()) * 0.1
            scene_rect.adjust(-padding, -padding, padding, padding)
            self.fitInView(scene_rect, Qt.AspectRatioMode.KeepAspectRatio)
```

**Alternatives Considered:**

1. **Shortcuts directly manipulate QGraphicsView**
   - ❌ Tight coupling between input and view logic
   - ❌ Hard to reuse from toolbar/menu
   - ❌ Harder to test

2. **Service layer for navigation (NavigationService)**
   - ✅ Additional abstraction layer
   - ❌ Overkill for simple view transformations
   - ❌ More boilerplate code

3. **Canvas methods (chosen approach)**
   - ✅ Simple and direct
   - ✅ Reusable from multiple input sources
   - ✅ Easy to test
   - ✅ Standard Qt pattern

### 2.2 Search Dialog Integration

#### Decision: Add focus_search_input() method to SearchPanel

**Rationale:**
- `Ctrl+F` should both open AND focus the search input
- If already open, just focus (don't close/reopen)
- Selecting existing text allows easy replacement
- Clear user intent: "I want to search now"

**Design:**

```python
# src/ink/presentation/panels/search_panel.py
from PySide6.QtWidgets import QWidget, QLineEdit

class SearchPanel(QWidget):
    """Search panel with keyboard shortcut support."""

    def __init__(self, parent=None):
        super().__init__(parent)
        self.search_input = QLineEdit()
        # ... setup UI

    def focus_search_input(self) -> None:
        """
        Set focus to search input and select all text.

        Called when Ctrl+F is pressed. Selects existing text
        to allow easy replacement.
        """
        self.search_input.setFocus()
        self.search_input.selectAll()
```

### 2.3 Zoom Factor and Pan Distance

#### Decision: Fixed constants for MVP, configurable in P1

**Rationale:**
- Simple implementation for MVP
- Values chosen based on common UX patterns
- Can be made configurable later without API changes
- 1.2x zoom factor (20% per step) is industry standard

**Constants:**

| Parameter | Value | Rationale |
|-----------|-------|-----------|
| Zoom factor | 1.2x | Standard for CAD/graphics apps, feels natural |
| Pan distance | 50px | Visible movement without being jarring |
| Fit padding | 10% | Provides breathing room around fitted objects |

---

## 3. Implementation Approach

### 3.1 Development Phases

#### Phase 1: Canvas Methods Implementation (1 hour)

**Deliverables:**
- `zoom_in()`, `zoom_out()`, `reset_zoom()` methods
- `pan()` method
- `fit_items()`, `fit_all()` methods
- Unit tests for each method

**Implementation Steps:**
1. Add methods to `SchematicCanvas` class
2. Implement zoom using `QGraphicsView.scale()`
3. Implement reset using `QGraphicsView.resetTransform()`
4. Implement pan using scrollbar manipulation
5. Implement fit using `QGraphicsView.fitInView()`
6. Handle edge cases (empty scene, no selection)

**Key Code Sections:**

```python
def zoom_in(self, factor: float = 1.2) -> None:
    """Zoom in by factor."""
    self.scale(factor, factor)
    # Note: scale() multiplies current transform, so repeated calls compound

def pan(self, dx: int, dy: int) -> None:
    """Pan by pixel delta."""
    # Use scrollbars instead of translate() to maintain scroll range
    h_bar = self.horizontalScrollBar()
    v_bar = self.verticalScrollBar()
    h_bar.setValue(h_bar.value() + dx)
    v_bar.setValue(v_bar.value() + dy)
```

#### Phase 2: Shortcut Registration (1 hour)

**Deliverables:**
- All navigation shortcuts registered in `MainWindow`
- Callback methods for each shortcut
- Integration with `ShortcutManager` from T01

**Implementation Steps:**
1. Add `_register_navigation_shortcuts()` method to `MainWindow`
2. Implement callback methods (`_on_zoom_in()`, `_on_pan_up()`, etc.)
3. Register each shortcut with `ShortcutManager`
4. Test each shortcut manually

**Key Code Sections:**

```python
# src/ink/presentation/main_window.py
def _register_shortcuts(self) -> None:
    """Register all application shortcuts."""
    self._register_navigation_shortcuts()
    # ... other shortcut categories

def _register_navigation_shortcuts(self) -> None:
    """Register navigation shortcuts."""
    # Search
    self.shortcut_manager.register_shortcut(
        "search",
        SHORTCUTS["search"],
        self._on_search_shortcut
    )

    # Zoom
    self.shortcut_manager.register_shortcut(
        "zoom_in",
        SHORTCUTS["zoom_in"],
        self._on_zoom_in
    )
    # ... more zoom shortcuts

    # Pan
    for direction in ["up", "down", "left", "right"]:
        self.shortcut_manager.register_shortcut(
            f"pan_{direction}",
            SHORTCUTS[f"pan_{direction}"],
            getattr(self, f"_on_pan_{direction}")
        )

    # Fit
    self.shortcut_manager.register_shortcut(
        "fit_selection",
        SHORTCUTS["fit_selection"],
        self._on_fit_selection
    )
    # ... more fit shortcuts

def _on_zoom_in(self) -> None:
    """Handle zoom in shortcut."""
    self.canvas.zoom_in()

def _on_pan_up(self) -> None:
    """Handle pan up shortcut."""
    self.canvas.pan(0, -50)  # Negative Y moves view up
```

#### Phase 3: Search Integration (0.5 hour)

**Deliverables:**
- `focus_search_input()` method in `SearchPanel`
- `Ctrl+F` handler in `MainWindow`
- Search panel show/focus logic

**Implementation Steps:**
1. Add `focus_search_input()` to `SearchPanel`
2. Implement `_on_search_shortcut()` in `MainWindow`
3. Handle case where panel is hidden
4. Test focus behavior

#### Phase 4: Testing and Refinement (0.5 hour)

**Deliverables:**
- Unit tests for all canvas methods
- Integration tests for shortcuts
- Manual testing checklist completed
- Bug fixes

**Implementation Steps:**
1. Write unit tests for canvas methods
2. Write integration tests for shortcut activation
3. Manual testing of all shortcuts
4. Fix any issues found
5. Performance check (zoom/pan responsiveness)

### 3.2 Key Design Decisions

**1. Pan Direction Convention**

Decision: Positive delta moves content, not viewport

```python
# Arrow Up: Move view up (content moves down)
self.canvas.pan(0, -50)  # Negative Y

# Arrow Down: Move view down (content moves up)
self.canvas.pan(0, 50)   # Positive Y
```

**Rationale:**
- Matches scrollbar behavior
- Intuitive: Up arrow shows content above
- Consistent with industry standards

**2. Zoom Anchor Point**

Decision: Zoom around viewport center for MVP

**Rationale:**
- Simple implementation using `QGraphicsView.scale()`
- Predictable behavior
- P1: Can add zoom-to-cursor using transform origin

**3. Fit View Padding**

Decision: 10% padding around fitted objects

**Rationale:**
- Provides visual breathing room
- Prevents objects from touching viewport edges
- Standard in graphics applications

**4. Multiple Zoom Shortcuts**

Decision: Support both `+`/`-` and `Ctrl+=/Ctrl+-`

**Rationale:**
- `+`/`-`: Quick access without modifier
- `Ctrl+=/Ctrl+-`: Standard across applications
- Both registered for same action using list

### 3.3 Integration Points

**With E04-F04-T01 (Shortcut Manager):**
- Uses `ShortcutManager.register_shortcut()` for all shortcuts
- Uses `SHORTCUTS` config for key sequences
- Multiple shortcuts per action (zoom has 2 sequences each)

**With E05 (Search):**
- Assumes `SearchPanel` exists or will exist
- `Ctrl+F` handler calls `SearchPanel.focus_search_input()`
- Graceful handling if search panel not implemented yet

**With E02 (Rendering/Canvas):**
- Assumes `SchematicCanvas` extends `QGraphicsView`
- Canvas must have `scene()` method returning `QGraphicsScene`
- Scene must track items for `fit_all()` to work

---

## 4. Testing Strategy

### 4.1 Unit Tests

**Test Coverage Target**: >90%

**Key Test Cases:**

```python
# tests/unit/presentation/canvas/test_schematic_canvas_navigation.py
from PySide6.QtWidgets import QGraphicsScene
from PySide6.QtCore import QRectF
import pytest

class TestSchematicCanvasNavigation:
    @pytest.fixture
    def canvas(self, qtbot):
        canvas = SchematicCanvas()
        scene = QGraphicsScene()
        canvas.setScene(scene)
        qtbot.addWidget(canvas)
        return canvas

    def test_zoom_in_increases_scale(self, canvas):
        """Test zoom in increases view scale."""
        initial_transform = canvas.transform()
        initial_scale = initial_transform.m11()  # X scale factor

        canvas.zoom_in(1.2)

        new_transform = canvas.transform()
        new_scale = new_transform.m11()

        assert new_scale > initial_scale
        assert abs(new_scale / initial_scale - 1.2) < 0.01

    def test_zoom_out_decreases_scale(self, canvas):
        """Test zoom out decreases view scale."""
        canvas.zoom_in(1.2)  # Zoom in first
        zoomed_scale = canvas.transform().m11()

        canvas.zoom_out(1.2)

        final_scale = canvas.transform().m11()
        assert final_scale < zoomed_scale

    def test_reset_zoom_returns_to_identity(self, canvas):
        """Test reset zoom returns to 100%."""
        canvas.zoom_in(2.0)
        canvas.reset_zoom()

        transform = canvas.transform()
        assert abs(transform.m11() - 1.0) < 0.01  # X scale = 1
        assert abs(transform.m22() - 1.0) < 0.01  # Y scale = 1

    def test_pan_moves_viewport(self, canvas):
        """Test pan changes scrollbar values."""
        initial_h = canvas.horizontalScrollBar().value()
        initial_v = canvas.verticalScrollBar().value()

        canvas.pan(50, 30)

        new_h = canvas.horizontalScrollBar().value()
        new_v = canvas.verticalScrollBar().value()

        assert new_h == initial_h + 50
        assert new_v == initial_v + 30

    def test_fit_items_zooms_to_selection(self, canvas):
        """Test fit_items zooms to fit selected items."""
        from PySide6.QtWidgets import QGraphicsRectItem

        # Add some items to scene
        item1 = QGraphicsRectItem(0, 0, 100, 100)
        item2 = QGraphicsRectItem(200, 200, 100, 100)
        canvas.scene().addItem(item1)
        canvas.scene().addItem(item2)

        canvas.fit_items([item1, item2])

        # Verify view encompasses both items (hard to test exact transform)
        # At minimum, check that transform changed
        transform = canvas.transform()
        assert transform.m11() != 1.0  # Scale changed

    def test_fit_all_zooms_to_scene(self, canvas):
        """Test fit_all zooms to fit all items."""
        from PySide6.QtWidgets import QGraphicsRectItem

        # Add items
        canvas.scene().addItem(QGraphicsRectItem(0, 0, 100, 100))
        canvas.scene().addItem(QGraphicsRectItem(500, 500, 100, 100))

        canvas.fit_all()

        # Verify transform changed
        transform = canvas.transform()
        assert transform.m11() != 1.0

    def test_fit_items_handles_empty_list(self, canvas):
        """Test fit_items handles empty item list gracefully."""
        # Should not crash
        canvas.fit_items([])

    def test_fit_all_handles_empty_scene(self, canvas):
        """Test fit_all handles empty scene gracefully."""
        # Should not crash
        canvas.fit_all()
```

### 4.2 Integration Tests

**Test Scenarios:**

```python
# tests/integration/presentation/test_navigation_shortcuts.py
from PySide6.QtCore import Qt
from PySide6.QtTest import QTest

class TestNavigationShortcuts:
    def test_ctrl_f_opens_search_panel(self, main_window, qtbot):
        """Test Ctrl+F opens and focuses search panel."""
        # Ensure panel starts hidden
        main_window.search_panel.hide()

        # Press Ctrl+F
        QTest.keyClick(main_window, Qt.Key.Key_F, Qt.KeyboardModifier.ControlModifier)

        # Panel should be visible
        assert main_window.search_panel.isVisible()

        # Search input should have focus
        assert main_window.search_panel.search_input.hasFocus()

    def test_ctrl_f_when_panel_open_focuses_input(self, main_window, qtbot):
        """Test Ctrl+F when panel already open just focuses input."""
        main_window.search_panel.show()
        main_window.search_panel.search_input.setText("test")

        # Focus something else
        main_window.canvas.setFocus()

        # Press Ctrl+F
        QTest.keyClick(main_window, Qt.Key.Key_F, Qt.KeyboardModifier.ControlModifier)

        # Input should have focus and text selected
        assert main_window.search_panel.search_input.hasFocus()
        assert main_window.search_panel.search_input.selectedText() == "test"

    def test_zoom_in_shortcut(self, main_window, qtbot):
        """Test + and Ctrl+= zoom in."""
        initial_scale = main_window.canvas.transform().m11()

        # Test +
        QTest.keyClick(main_window, Qt.Key.Key_Plus)
        new_scale = main_window.canvas.transform().m11()
        assert new_scale > initial_scale

        # Test Ctrl+=
        initial_scale = new_scale
        QTest.keyClick(main_window, Qt.Key.Key_Equal, Qt.KeyboardModifier.ControlModifier)
        new_scale = main_window.canvas.transform().m11()
        assert new_scale > initial_scale

    def test_pan_shortcuts(self, main_window, qtbot):
        """Test arrow keys pan view."""
        initial_h = main_window.canvas.horizontalScrollBar().value()
        initial_v = main_window.canvas.verticalScrollBar().value()

        # Pan right
        QTest.keyClick(main_window, Qt.Key.Key_Right)
        assert main_window.canvas.horizontalScrollBar().value() > initial_h

        # Pan down
        QTest.keyClick(main_window, Qt.Key.Key_Down)
        assert main_window.canvas.verticalScrollBar().value() > initial_v

    def test_fit_selection_shortcut(self, main_window, qtbot):
        """Test Space fits to selection."""
        # Add and select items
        # ... setup

        initial_scale = main_window.canvas.transform().m11()

        # Press Space
        QTest.keyClick(main_window, Qt.Key.Key_Space)

        # Scale should have changed
        assert main_window.canvas.transform().m11() != initial_scale
```

### 4.3 Manual Testing Checklist

- [ ] `Ctrl+F` opens search panel when hidden
- [ ] `Ctrl+F` focuses search input when panel visible
- [ ] `Ctrl+F` selects existing text in search input
- [ ] `+` key zooms in
- [ ] `-` key zooms out
- [ ] `Ctrl+=` zooms in
- [ ] `Ctrl+-` zooms out
- [ ] `Ctrl+1` resets zoom to 100%
- [ ] `Ctrl+0` fits all visible objects (note: conflicts with fit_all, fix in spec)
- [ ] Up arrow pans view up
- [ ] Down arrow pans view down
- [ ] Left arrow pans view left
- [ ] Right arrow pans view right
- [ ] `Space` fits selection (when items selected)
- [ ] `Space` does nothing when no selection
- [ ] Zoom feels smooth and responsive
- [ ] Pan distance feels appropriate (not too fast/slow)
- [ ] Fit view includes comfortable padding

---

## 5. Risks and Considerations

### 5.1 Technical Risks

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| **Pan/zoom conflicts with Qt defaults** | Low | Low | Use explicit key sequences, test on Qt 6.x |
| **Arrow keys don't work when widget has focus** | Medium | Medium | Use `WindowShortcut` context, ensure shortcuts registered on main window |
| **Zoom becomes too fast/slow after many steps** | Low | Medium | Compound scaling is correct behavior, user can reset with `Ctrl+1` |
| **Fit view calculation fails for complex scenes** | Medium | Low | Test with large scenes, add bounds checking |

### 5.2 UX Risks

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| **Pan distance too small/large** | Low | Medium | 50px chosen based on testing, can adjust if needed |
| **Zoom factor feels unnatural** | Low | Low | 1.2x is industry standard, well-tested |
| **Search panel focus behavior confusing** | Low | Low | Document behavior, matches common UX patterns |
| **Fit view padding too much/little** | Low | Medium | 10% is standard, visually test with real schematics |

### 5.3 Integration Risks

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| **SearchPanel doesn't exist yet** | High | Medium | Stub the panel for MVP, or handle gracefully if not present |
| **Canvas doesn't extend QGraphicsView** | High | Low | Verify with E02 architecture, QGraphicsView is standard choice |
| **Scene bounding rect inaccurate** | Medium | Low | Qt handles this automatically, but test with complex scenes |

### 5.4 Assumptions

1. **SchematicCanvas extends QGraphicsView**: Required for scale(), fitInView()
2. **SearchPanel will be implemented**: Or gracefully degrade if not present
3. **MainWindow has canvas and search_panel attributes**: Integration assumption
4. **Scene populated with items**: Fit operations assume items exist

---

## 6. Dependencies

### 6.1 Upstream Dependencies

**Hard Dependencies:**
- E04-F04-T01 (Shortcut Manager): Must be complete for registration
- `SchematicCanvas` class exists (E02 or stub)
- `MainWindow` class exists (E04 or stub)
- Qt event loop running

**Soft Dependencies:**
- E05 (Search): Search panel may not exist yet (graceful degradation)
- E02 (Rendering): Scene may be empty for testing

### 6.2 Downstream Dependencies

**This task is a dependency for:**
- E04-F04-T04 (Documentation): Navigation shortcuts need to be documented

**Interfaces Provided:**
- Canvas navigation methods: `zoom_in()`, `zoom_out()`, `pan()`, `fit_items()`, `fit_all()`
- Search focus method: `SearchPanel.focus_search_input()`

---

## 7. Success Criteria

### 7.1 Functional Completeness

- [ ] All navigation shortcuts work as specified
- [ ] `Ctrl+F` opens/focuses search panel
- [ ] Zoom shortcuts zoom by 1.2x factor
- [ ] Pan shortcuts pan by 50px
- [ ] Fit shortcuts work with appropriate padding
- [ ] No crashes when pressing shortcuts

### 7.2 Quality Criteria

- [ ] Unit test coverage >90% for canvas methods
- [ ] All integration tests passing
- [ ] No type errors (mypy passes)
- [ ] No linting errors (ruff passes)
- [ ] Manual testing checklist complete

### 7.3 Performance

- [ ] Zoom response time <16ms (60fps)
- [ ] Pan response time <16ms (60fps)
- [ ] Fit view calculation <100ms for scenes with <1000 objects

### 7.4 UX Quality

- [ ] Zoom feels natural and responsive
- [ ] Pan distance is comfortable (not jarring)
- [ ] Fit view provides good visual framing
- [ ] No unexpected behavior or edge cases

---

## 8. Open Questions

### 8.1 Technical Questions

1. **Q: Should arrow keys work when canvas has focus, or always?**
   - A: Always (WindowShortcut context). Users expect arrow keys to pan regardless of focus.

2. **Q: What happens if scene is empty when pressing fit shortcuts?**
   - A: No-op. fitInView() handles empty rects gracefully.

3. **Q: Should we limit maximum/minimum zoom levels?**
   - A: No for MVP. Qt handles extreme scales reasonably. Add limits in P1 if needed.

### 8.2 UX Questions

1. **Q: Should zoom be centered on cursor or viewport center?**
   - A: Viewport center for MVP (simpler). Zoom-to-cursor in P1.

2. **Q: Should pan wrap around or stop at scene bounds?**
   - A: Stop at bounds (Qt scrollbar default behavior).

3. **Q: Should `Ctrl+0` mean "fit all" or "reset zoom to 100%"?**
   - A: **CONFLICT IN SPEC**. Spec says both. Recommend:
     - `Ctrl+0`: Fit all
     - `Ctrl+1`: Reset zoom to 100%

---

## 9. Implementation Checklist

### 9.1 Pre-Implementation

- [ ] Review E04-F04-T02 task spec
- [ ] Confirm SchematicCanvas exists or create stub
- [ ] Confirm SearchPanel exists or create stub
- [ ] Resolve `Ctrl+0` spec conflict

### 9.2 Implementation

- [ ] Implement canvas zoom methods
- [ ] Implement canvas pan method
- [ ] Implement canvas fit methods
- [ ] Implement SearchPanel focus method
- [ ] Register all navigation shortcuts in MainWindow
- [ ] Implement shortcut callback methods

### 9.3 Testing

- [ ] Write unit tests for canvas methods
- [ ] Write integration tests for shortcuts
- [ ] Manual testing of all shortcuts
- [ ] Performance testing (zoom/pan responsiveness)
- [ ] Edge case testing (empty scene, no selection)

### 9.4 Documentation

- [ ] Add docstrings to canvas methods
- [ ] Document shortcut behavior
- [ ] Update post-docs
- [ ] Note any deviations from spec

### 9.5 Review and Cleanup

- [ ] Run mypy type checking
- [ ] Run ruff linting
- [ ] Code review
- [ ] Address feedback
- [ ] Final testing pass

---

## 10. References

### 10.1 Internal Documents

- [E04-F04 Feature Spec](../E04-F04.spec.md)
- [E04-F04-T02 Task Spec](./E04-F04-T02.spec.md)
- [E04-F04-T01 Pre-Docs](../T01/E04-F04-T01.pre-docs.md)
- [PRD Section 7.3 - Keyboard Shortcuts](../../../../docs/prd.md)

### 10.2 Qt Documentation

- [QGraphicsView Class](https://doc.qt.io/qt-6/qgraphicsview.html)
- [QGraphicsView Transformations](https://doc.qt.io/qt-6/qgraphicsview.html#transformations)
- [QGraphicsView::fitInView()](https://doc.qt.io/qt-6/qgraphicsview.html#fitInView)
- [QScrollBar Class](https://doc.qt.io/qt-6/qscrollbar.html)

### 10.3 UX Patterns

- Zoom factors: 1.2x is standard (Adobe, Figma, CAD tools)
- Pan distance: 10-20% of viewport is comfortable
- Fit view: 5-15% padding is typical

---

**End of Pre-Implementation Documentation**
