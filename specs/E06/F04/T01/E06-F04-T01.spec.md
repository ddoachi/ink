---
id: E06-F04-T01
title: Status Bar Setup
type: Task
priority: P0 (MVP)
status: Draft
parent: E06-F04
created: 2025-12-26
estimated_hours: 2
actual_hours:
effort: Small
tags:
  - ui
  - statusbar
  - setup
clickup_task_id: '86evzm358'
---

# Spec: E06-F04-T01 - Status Bar Setup

## 1. Overview

### 1.1 Problem Statement

The main window needs a status bar infrastructure to display contextual information. This task sets up the QStatusBar with proper layout, persistent widgets, and visual separators to provide the foundation for all status display functionality.

### 1.2 Goals

- Create and attach QStatusBar to main window
- Set up permanent widget slots for all status fields
- Add visual separators between status sections
- Configure minimum widths and styling for status widgets
- Ensure status bar remains visible and properly sized

---

## 2. Technical Requirements

### 2.1 Status Bar Layout Structure

```
┌────────────────────────────────────────────────────────────────────┐
│ File: design.ckt  │  Zoom: 100%  │  Selected: 3  │  Cells: 45 / Nets: 67 │
└────────────────────────────────────────────────────────────────────┘
  Widget 1 (200px)    Widget 2       Widget 3        Widget 4 (150px)
                      (100px)        (100px)
```

### 2.2 Implementation

**File**: `src/ink/presentation/main_window.py`

```python
from PySide6.QtWidgets import QStatusBar, QLabel

class InkMainWindow(QMainWindow):
    def _setup_status_bar(self):
        """Create status bar with persistent status widgets."""
        status = QStatusBar()
        self.setStatusBar(status)

        # File name label (left side)
        self.file_label = QLabel("No file loaded")
        self.file_label.setMinimumWidth(200)
        status.addPermanentWidget(self.file_label)

        # Separator
        status.addPermanentWidget(self._create_separator())

        # Zoom level label
        self.zoom_label = QLabel("Zoom: 100%")
        self.zoom_label.setMinimumWidth(100)
        status.addPermanentWidget(self.zoom_label)

        # Separator
        status.addPermanentWidget(self._create_separator())

        # Selection count label
        self.selection_label = QLabel("Selected: 0")
        self.selection_label.setMinimumWidth(100)
        status.addPermanentWidget(self.selection_label)

        # Separator
        status.addPermanentWidget(self._create_separator())

        # Object count label
        self.object_count_label = QLabel("Cells: 0 / Nets: 0")
        self.object_count_label.setMinimumWidth(150)
        status.addPermanentWidget(self.object_count_label)

    def _create_separator(self) -> QLabel:
        """Create vertical separator for status bar."""
        sep = QLabel(" │ ")
        sep.setStyleSheet("color: gray;")
        return sep
```

### 2.3 Integration

- Call `_setup_status_bar()` in `InkMainWindow.__init__()` after UI setup
- Ensure status bar is created before any status update methods are called
- Store references to all status labels as instance attributes

### 2.4 Widget Configuration

| Widget | Purpose | Min Width | Initial Text | Alignment |
|--------|---------|-----------|--------------|-----------|
| `file_label` | File name display | 200px | "No file loaded" | Left |
| `zoom_label` | Zoom percentage | 100px | "Zoom: 100%" | Left |
| `selection_label` | Selection count | 100px | "Selected: 0" | Left |
| `object_count_label` | Cell/net counts | 150px | "Cells: 0 / Nets: 0" | Left |

---

## 3. Dependencies

- **Upstream**:
  - E06-F01 (Main Window Shell - QMainWindow exists)
- **Downstream**: None (provides foundation for other status tasks)
- **External**: PySide6 (`QStatusBar`, `QLabel`)

---

## 4. Acceptance Criteria

- [ ] QStatusBar created and attached to main window
- [ ] Status bar visible at bottom of window on launch
- [ ] Four permanent widgets added to status bar
- [ ] Visual separators (│) displayed between widgets
- [ ] All status labels show initial placeholder text
- [ ] Minimum widths configured for all widgets
- [ ] Status bar maintains layout when window resized
- [ ] Status bar has appropriate minimum height for readability
- [ ] No runtime errors or warnings on status bar creation
- [ ] Status bar follows Qt/PySide6 best practices

---

## 5. Testing Strategy

### 5.1 Manual Testing

```python
# Test checklist:
# 1. Launch application
# 2. Verify status bar visible at bottom
# 3. Check all four sections visible with separators
# 4. Resize window to minimum width
# 5. Verify status bar widgets remain visible
# 6. Check text alignment and spacing
```

### 5.2 Unit Test

```python
# tests/unit/presentation/test_main_window_status.py

def test_status_bar_creation(main_window):
    """Status bar should be created with all widgets."""
    assert main_window.statusBar() is not None
    assert hasattr(main_window, 'file_label')
    assert hasattr(main_window, 'zoom_label')
    assert hasattr(main_window, 'selection_label')
    assert hasattr(main_window, 'object_count_label')

def test_initial_status_text(main_window):
    """Status labels should show initial placeholder text."""
    assert main_window.file_label.text() == "No file loaded"
    assert main_window.zoom_label.text() == "Zoom: 100%"
    assert main_window.selection_label.text() == "Selected: 0"
    assert main_window.object_count_label.text() == "Cells: 0 / Nets: 0"

def test_separator_styling(main_window):
    """Separators should have gray color."""
    # Check that separators were created (exact count check)
    status = main_window.statusBar()
    widgets = [status.children()[i] for i in range(len(status.children()))]
    separators = [w for w in widgets if isinstance(w, QLabel) and "│" in w.text()]
    assert len(separators) == 3  # Three separators between four widgets
```

---

## 6. Implementation Checklist

- [ ] Import `QStatusBar` and `QLabel` in `main_window.py`
- [ ] Implement `_setup_status_bar()` method
- [ ] Implement `_create_separator()` helper method
- [ ] Add instance attributes for all status labels
- [ ] Call `_setup_status_bar()` in `__init__()` method
- [ ] Configure minimum widths for all widgets
- [ ] Add separators between widgets
- [ ] Set initial placeholder text for all labels
- [ ] Write unit tests for status bar setup
- [ ] Verify visual appearance matches design
- [ ] Test window resizing behavior
- [ ] Update documentation if needed

---

## Revision History

| Date | Version | Author | Changes |
|------|---------|--------|---------|
| 2025-12-26 | 0.1 | Claude | Initial task creation from E06-F04 split |
