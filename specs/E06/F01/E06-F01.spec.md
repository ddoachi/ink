# Spec: E06-F01 - Main Window Shell

## Metadata
- **ID**: E06-F01
- **Type**: Feature
- **Priority**: P0 (MVP)
- **Status**: Draft
- **Parent**: [E06](../E06.spec.md)
- **Created**: 2025-12-26
- **Estimated Hours**:
- **Actual Hours**:
- **Effort**:
- **Tags**: []

---

## 1. Overview

### 1.1 Problem Statement

Ink requires a foundational main window structure that serves as the container for all UI components. The main window must provide a central workspace for schematic visualization while organizing supporting panels in a familiar EDA tool layout pattern. Without this foundation, users cannot interact with any of the application's features.

### 1.2 Goals

- Implement `QMainWindow`-based application shell
- Create central schematic canvas area as primary workspace
- Establish dockable panel architecture for hierarchy, properties, and messages
- Provide standard window controls (minimize, maximize, close)
- Enable application lifecycle management (startup, shutdown)

---

## 2. User Stories

### US-E06-01: Main Window Layout
**As a** circuit designer
**I want to** see a familiar EDA tool layout
**So that** I can work productively from day one

**Acceptance Criteria:**
- [ ] Central area: Schematic canvas (largest)
- [ ] Left panel: Design hierarchy / object tree (collapsible)
- [ ] Right panel: Property inspector (collapsible)
- [ ] Bottom panel: Messages / search results (collapsible)
- [ ] Panels remember size and visibility

---

## 3. Technical Requirements

### 3.1 Main Window Class Structure

```python
# src/ink/presentation/main_window.py

from PySide6.QtWidgets import QMainWindow, QDockWidget
from PySide6.QtCore import Qt

class InkMainWindow(QMainWindow):
    """Main application window shell."""

    def __init__(self):
        super().__init__()
        self._setup_window()
        self._setup_central_widget()
        self._setup_dock_widgets()

    def _setup_window(self):
        """Configure main window properties."""
        self.setWindowTitle("Ink - Incremental Schematic Viewer")
        self.resize(1600, 900)  # Default size

    def _setup_central_widget(self):
        """Create and set central schematic canvas."""
        from ink.presentation.canvas.schematic_canvas import SchematicCanvas
        self.schematic_canvas = SchematicCanvas(self)
        self.setCentralWidget(self.schematic_canvas)

    def _setup_dock_widgets(self):
        """Create dockable panels."""
        # Left: Hierarchy panel
        self.hierarchy_dock = QDockWidget("Hierarchy", self)
        self.hierarchy_dock.setAllowedAreas(
            Qt.DockWidgetArea.LeftDockWidgetArea |
            Qt.DockWidgetArea.RightDockWidgetArea
        )
        self.addDockWidget(Qt.DockWidgetArea.LeftDockWidgetArea, self.hierarchy_dock)

        # Right: Property panel
        self.property_dock = QDockWidget("Properties", self)
        self.property_dock.setAllowedAreas(
            Qt.DockWidgetArea.LeftDockWidgetArea |
            Qt.DockWidgetArea.RightDockWidgetArea
        )
        self.addDockWidget(Qt.DockWidgetArea.RightDockWidgetArea, self.property_dock)

        # Bottom: Message panel
        self.message_dock = QDockWidget("Messages", self)
        self.message_dock.setAllowedAreas(Qt.DockWidgetArea.BottomDockWidgetArea)
        self.addDockWidget(Qt.DockWidgetArea.BottomDockWidgetArea, self.message_dock)
```

### 3.2 Application Entry Point

```python
# src/ink/main.py

import sys
from PySide6.QtWidgets import QApplication
from ink.presentation.main_window import InkMainWindow

def main():
    """Application entry point."""
    app = QApplication(sys.argv)
    app.setApplicationName("Ink")
    app.setOrganizationName("InkProject")

    window = InkMainWindow()
    window.show()

    sys.exit(app.exec())

if __name__ == "__main__":
    main()
```

### 3.3 Window Geometry Requirements

- **Minimum size**: 1024x768 (prevent unusable small windows)
- **Default size**: 1600x900 (optimized for 1080p displays)
- **Panel split ratios**:
  - Left hierarchy panel: 15% width
  - Central canvas: 60% width
  - Right property panel: 25% width
  - Bottom message panel: 20% height

### 3.4 Dock Widget Configuration

- All panels must be:
  - Closable (via close button)
  - Floatable (can detach as separate window)
  - Movable (can re-dock to different areas)
- Panel titles must be clearly visible
- Splitter handles between panels must be draggable

---

## 4. Dependencies

- **Upstream**: None (foundation component)
- **Downstream**:
  - E06-F02 (Menu System - attaches to main window)
  - E06-F03 (Toolbar - attaches to main window)
  - E06-F04 (Status Bar - attaches to main window)
  - E06-F05 (Panel Management - manages dock widget state)
  - E02 (Rendering - schematic canvas placement)
- **External**: PySide6 (`QMainWindow`, `QDockWidget`, `QApplication`)

---

## 5. Acceptance Criteria

- [ ] Application launches with main window visible
- [ ] Window has title "Ink - Incremental Schematic Viewer"
- [ ] Central area contains schematic canvas widget
- [ ] Three dock widgets present: hierarchy (left), properties (right), messages (bottom)
- [ ] All dock widgets can be closed, floated, and re-docked
- [ ] Window can be minimized, maximized, and closed
- [ ] Application exits cleanly when window is closed
- [ ] Application launches in <2 seconds on typical hardware
- [ ] Window respects system window manager decorations

---

## 6. Child Specs

| ID | Task | Status | Estimated Hours |
|----|------|--------|----------------|
| [E06-F01-T01](T01/E06-F01-T01.spec.md) | QMainWindow Setup - Basic window with title, size, minimum size | Draft | 2 |
| [E06-F01-T02](T02/E06-F01-T02.spec.md) | Central Widget Setup - Schematic canvas placeholder as central widget | Draft | 3 |
| [E06-F01-T03](T03/E06-F01-T03.spec.md) | Dock Widget Setup - Create hierarchy, property, message dock panels | Draft | 4 |
| [E06-F01-T04](T04/E06-F01-T04.spec.md) | Application Entry Point - main.py with QApplication lifecycle | Draft | 2 |
| [E06-F01-T05](T05/E06-F01-T05.spec.md) | Integration Testing and Polish - Test suite and UI polish | Draft | 3 |

**Total Estimated Hours**: 14

---

## Revision History

| Date | Version | Author | Changes |
|------|---------|--------|---------|
| 2025-12-26 | 0.1 | Claude | Initial feature creation from E06 split |
