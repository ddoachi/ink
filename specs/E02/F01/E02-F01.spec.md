# Spec: E02-F01 - Cell Symbol Rendering

## Metadata
- **ID**: E02-F01
- **Type**: Feature
- **Priority**: P0 (MVP)
- **Status**: Draft
- **Parent**: [E02](../E02.spec.md)
- **Created**: 2025-12-26

---

## 1. Overview

### 1.1 Problem Statement

Circuit designers need a visual representation of cells (gate-level instances) that clearly shows their structure, connectivity points (pins), and type. Without proper symbol rendering, understanding circuit topology and signal flow becomes impossible in a schematic viewer.

### 1.2 Goals

- Render cells as rectangular symbols with clear visual identity
- Display pins on appropriate sides (inputs left, outputs right)
- Show pin names and directions at appropriate zoom levels
- Distinguish between sequential and combinational logic visually
- Support zoom-based level of detail for pin information

---

## 2. User Stories

### US-E02-01: View Cell Symbols
**As a** circuit designer
**I want to** see cells rendered as symbols with visible pins
**So that** I can understand the circuit structure

**Acceptance Criteria:**
- [ ] Cells render as rectangular symbols with name label
- [ ] Input pins displayed on left side of symbol
- [ ] Output pins displayed on right side of symbol
- [ ] Pin names visible at default zoom level
- [ ] Different visual styles for sequential vs combinational cells

---

## 3. Technical Requirements

### 3.1 Cell Symbol Data Structure

```python
class CellSymbol:
    - bounding_rect: QRectF
    - name_label: str
    - pin_graphics: List[PinGraphic]
    - is_sequential: bool  # For visual styling
```

### 3.2 Pin Graphic Data Structure

```python
class PinGraphic:
    - position: QPointF (relative to cell)
    - direction: PinDirection
    - name_label: str
    - connection_point: QPointF
```

### 3.3 Rendering Requirements

- **Cell Body**: Rectangular shape with configurable dimensions
- **Cell Name**: Centered label with cell instance name
- **Pin Placement**:
  - INPUT pins on left edge
  - OUTPUT pins on right edge
  - INOUT pins on both edges (or configurable)
  - Evenly spaced vertically along edges
- **Visual Distinction**:
  - Sequential cells (latches/FFs): Different border style or fill pattern
  - Combinational cells: Standard rectangular style
- **Pin Connection Points**: Clearly defined attachment points for net routing

### 3.4 Zoom-Based Detail Levels

| Zoom Level | Cell Display | Pin Display |
|------------|--------------|-------------|
| <25% | Bounding box only | Hidden |
| 25-75% | Box + name | Pin indicators (dots) |
| >75% | Full detail | Pin names + direction arrows |

---

## 4. Dependencies

- **Upstream**:
  - E01-F01 (Cell/Pin domain model)
  - E01-F02 (Graph construction)
- **Downstream**:
  - E02-F02 (Layout engine needs cell dimensions)
  - E02-F03 (Net routing needs pin connection points)
  - E04 (Interaction - selection, highlighting)

---

## 5. Acceptance Criteria

- [ ] Cell symbols render with correct dimensions in Qt Graphics Scene
- [ ] Pin positions calculated correctly based on pin direction
- [ ] Cell names displayed centered within symbol bounds
- [ ] Sequential cells visually distinct from combinational cells
- [ ] Pin names visible at zoom >75%
- [ ] Pin indicators (dots) visible at zoom 25-75%
- [ ] No pin details shown at zoom <25%
- [ ] Rendering performance: 1000+ cells at 60fps
- [ ] Symbol graphics properly cached for performance

---

## 6. Child Specs

*To be created via `/spec_work E02-F01 --split tasks`*

| ID | Task | Status |
|----|------|--------|

---

## Revision History

| Date | Version | Author | Changes |
|------|---------|--------|---------|
| 2025-12-26 | 0.1 | Claude | Initial feature creation from E02 split |
